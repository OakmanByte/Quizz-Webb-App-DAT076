<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:f="http://java.sun.com/jsf/core"
       xmlns:p="http://primefaces.org/ui"
       xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
       xmlns:b="http://bootsfaces.net/ui">


    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>

        <ui:composition template="WEB-INF/template/common.xhtml">

            <ui:define name="content">

                <h:form id="questionform">

                    <h3 style ="text-align: center; margin-left: 20px; font-size: 25px; ">#{playQuizBackingBean.getcurrentQuestion().question} </h3>


                    <div>
                        <div style="display: table-cell">
                            <h3 style ="margin-left: 20px; font-size: 20px; ">Question: #{playQuizBackingBean.currentQuestionIndex + 1} / #{playQuizBackingBean.questions.size()} </h3>
                        </div>

                        <div style="display: table-cell">
                            <h3 style ="margin-left: 2.5em; font-size: 20px; ">Points: #{playQuizBackingBean.points} / #{playQuizBackingBean.questions.size()}</h3>
                        </div>

                        <div style="display: table-cell">

                            <h3 class="p-text-center" style ="margin-left: 2.5em; font-size: 20px">
                                <h:outputText id="txt_count" value="Time left: #{playQuizBackingBean.timer} seconds"/>
                            </h3>
                            <p:poll interval="1" listener="#{playQuizBackingBean.decrementTimer()}" update="txt_count"  />

                        </div>
                    </div>


                    <div class="card" style="text-align: center">

                        <p:column>
                            <p:commandButton value="#{playQuizBackingBean.getcurrentQuestion().alt1}"  action="#{playQuizController.onAnswer(1)}" update="@form" disabled="#{ (playQuizBackingBean.currentQuestionAnswered and !playQuizBackingBean.isCorrectAnswer(1)) or playQuizBackingBean.timerAtZero}" icon ="fa fa-fw fa-diamond" style="margin-left: 20px; word-wrap: break-word; background-color: goldenrod; font-size: 20px; font-weight: bold; width: 30em; height: 10em " />
                        </p:column>
                        <p:column>
                            <p:commandButton value="#{playQuizBackingBean.getcurrentQuestion().alt2}" action="#{playQuizController.onAnswer(2)}" update="@form" disabled="#{playQuizBackingBean.currentQuestionAnswered and !playQuizBackingBean.isCorrectAnswer(2) or playQuizBackingBean.timerAtZero}" icon="fa fa-fw fa-briefcase" style="margin-left: 20px; word-wrap: break-word; background-color: green; font-size: 20px; font-weight: bold; width: 30em; height: 10em;" />
                        </p:column>

                    </div>

                    <div style="margin-bottom: 20px; margin-top: 20px">
                        <p:growl id="growl" showDetail="true" life="5000" keepAlive="true"/>
                    </div>

                    <div class="card" style="text-align: center">

                        <p:column>
                            <p:commandButton value="#{playQuizBackingBean.getcurrentQuestion().alt3}" action="#{playQuizController.onAnswer(3)}" update="@form" disabled="#{playQuizBackingBean.currentQuestionAnswered and !playQuizBackingBean.isCorrectAnswer(3) or playQuizBackingBean.timerAtZero}" icon="fa fa-fw fa-android" style="margin-left: 20px; word-wrap: break-word; background-color: red; font-size: 20px; font-weight: bold; width: 30em; height: 10em" />
                        </p:column>
                        <p:column>
                            <p:commandButton value="#{playQuizBackingBean.getcurrentQuestion().alt4}" action="#{playQuizController.onAnswer(4)}" update="@form" disabled="#{playQuizBackingBean.currentQuestionAnswered and !playQuizBackingBean.isCorrectAnswer(4) or playQuizBackingBean.timerAtZero}" icon="fa fa-fw fa-bank" style="margin-left: 20px; word-wrap: break-word; background-color: blue; font-size: 20px; font-weight: bold; width: 30em; height: 10em" />
                        </p:column>

                    </div>

                    <div style="text-align: right; margin-right: 1em; margin-top: 0.5em" >
                        <p:commandButton value="Next question" action="#{playQuizController.nextQuestion()}" disabled="#{!playQuizBackingBean.currentQuestionAnswered}" icon="fa fa-fw fa-arrow-right" update="@form" />
                    </div>

                    <div style="text-align: left; margin-right: 1em; margin-top: 0.5em;" >
                        <p:button href="endquiz.xhtml" icon="fa fa-fw fa-arrow-right" value="Go to end quiz"> 
                            <f:param name="quizId" value="#{playQuizBackingBean.quizId}"/>
                            <f:param name="points" value="#{playQuizBackingBean.points}"/>
                        </p:button>

                    </div>


                </h:form>

            </ui:define>

        </ui:composition>

    </h:body>


</html>

